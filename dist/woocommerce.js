import{m as d,a as c}from"./assets/scripts-BBy8b9DE.js";import{a as s}from"./assets/index-BhdsrUP8.js";import"./assets/htmx.min-DpIuoioD.js";let a=1,o=!1,n,l=()=>{window.Alpine=d,d.start();const r=document.querySelector("#load-trigger").getAttribute("data-max-pages");n=new IntersectionObserver(t=>{t[0].isIntersecting&&!o&&a<r&&i(r)},{root:null,threshold:.1}),n.observe(document.querySelector("#load-trigger"))},i=r=>{if(o)return;o=!0,a++;const t=new FormData;t.append("action","load_more_products"),t.append("page",a),s.post(c,t).then(function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error("Failed to load"))}).then(e=>{e.data&&(document.querySelector("#shop-products").insertAdjacentHTML("beforeend",e.data),o=!1)}).catch(function(e){console.error(e),o=!1}),a>=r&&(n.disconnect(),document.querySelector("#load-trigger").remove())};document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?l():document.addEventListener("DOMContentLoaded",l);
