import{g as m,a as g,m as l}from"./assets/scripts-BBy8b9DE.js";import"./assets/htmx.min-DpIuoioD.js";import{a as f}from"./assets/index-BhdsrUP8.js";let r=1,n=!1,s=1,o=!1,i,c=0;document.body.addEventListener("htmx:afterSwap",function(e){let t=e.detail.target;t.classList.remove("loading"),t.classList.add("loaded"),document.querySelector(".items-container").classList.remove("is-calling"),document.querySelector(".items-container").classList.add("is-not-calling"),c++,c>1?m(".items-container"):u(),r=1});document.body.addEventListener("htmx:configRequest",function(e){n=!0,e.target.classList.contains("page-btn")?r=e.target.getAttribute("data-page"):e.target.classList.contains("filter-btn")&&(e.target.classList.contains("active")==!1&&(e.target.closest(".filter-list").querySelectorAll("button").forEach(t=>t.classList.remove("active")),e.target.classList.toggle("active")),r=1),e.detail.path+="/"+r,n&&(document.querySelector(".items-container").classList.remove("is-not-calling"),document.querySelector(".items-container").classList.add("is-calling"))});let d=()=>{window.Alpine=l,l.start(),document.body.classList.toggle("loaded")},u=()=>{if(document.querySelector("#load-trigger")===null)return;const e=document.querySelector("#load-trigger"),t=e.getAttribute("data-max-pages");i=new IntersectionObserver(a=>{a[0].isIntersecting&&!o&&s<t&&(i.unobserve(e),e.remove(),L(t))},{root:null,threshold:.1}),i.observe(e)},L=e=>{if(o)return;o=!0,s++;const t=new FormData;t.append("action","load_more_articles"),t.append("page",s),f.post(g,t).then(function(a){return a.status>=200&&a.status<300?Promise.resolve(a):Promise.reject(new Error("Failed to load"))}).then(a=>{a.data&&(document.querySelector("#items-wrapper").insertAdjacentHTML("beforeend",a.data),o=!1,u())}).catch(function(a){console.error(a),o=!1}),s>=e&&i.disconnect()};document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?d():document.addEventListener("DOMContentLoaded",d);
